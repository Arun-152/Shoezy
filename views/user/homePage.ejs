<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Shoezy - Premium Sneakers</title>
    <link rel="stylesheet" href="css/homePage.css">
</head>
<body>
    <!-- Header -->
    <%-include("../partials/user/navbar")%>
    <!-- Hero Section -->
    <section class="hero">
        <div class="hero-content">
            <div class="hero-text">
                <h2>Shoezy</h2>
                <p>Premium collection of modern sneakers</p>
            </div>
            <div class="hero-image">
                <div class="circle-bg"></div>
                <div class="sneaker-display">
                    <img src="https://via.placeholder.com/300x200/ffffff/cccccc?text=Sneaker" alt="Featured Sneaker" class="main-sneaker">
                </div>
            </div>
        </div>
        
        <!-- Color Options -->
        <div class="color-options">
            <div class="color-dot active" style="background-color: #333;"></div>
            <div class="color-dot" style="background-color: #666;"></div>
            <div class="color-dot" style="background-color: #999;"></div>
            <div class="color-dot" style="background-color: #ccc;"></div>
        </div>
    </section>

    <!-- Air Jordan Section -->
    <section class="air-jordan">
        <div class="jordan-content">
            <div class="jordan-text">
                <h2>AIR JORDAN</h2>
                <p>Iconic basketball sneakers with legendary performance and style</p>
                <button class="shop-btn">Shop Now</button>
            </div>
            <div class="jordan-image">
                <img src="https://via.placeholder.com/400x300/dc2626/ffffff?text=Air+Jordan" alt="Air Jordan" class="jordan-sneaker">
            </div>
        </div>
    </section>

    <!-- Products Grid -->
    <section class="products">
        <div class="container">
            <h2 style="text-align: center; margin-bottom: 30px; color: #333;">Featured Products</h2>
            <div class="products-grid">
                <% if (products && products.length > 0) { %>
                    <% products.forEach(product => { %>
                        <div class="product-card">
                            <div class="product-image">
                                <% if (product.images && product.images.length > 0) { %>
                                    <img src="<%= product.images[0] %>" alt="<%= product.productName %>">
                                <% } else { %>
                                    <img src="https://via.placeholder.com/250x200/ffffff/cccccc?text=Shoe" alt="<%= product.productName %>">
                                <% } %>
                            </div>
                            <div class="product-info">
                                <h3><%= product.productName %></h3>
                                <p class="category"><%= product.category ? product.category.name : 'Uncategorized' %></p>
                                <% if (product.variants && product.variants.length > 0) { %>
                                    <% 
                                        const prices = product.variants.map(v => v.salePrice);
                                        const originalPrices = product.variants.map(v => v.variantPrice);
                                        const minSalePrice = Math.min(...prices);
                                        const maxSalePrice = Math.max(...prices);
                                        const minOriginalPrice = Math.min(...originalPrices);
                                        const maxOriginalPrice = Math.max(...originalPrices);
                                        const hasDiscount = minSalePrice < minOriginalPrice;
                                    %>
                                    <% if (hasDiscount) { %>
                                        <p class="price">
                                            <% if (minSalePrice === maxSalePrice) { %>
                                                <span class="sale-price">$<%= minSalePrice %></span>
                                                <span class="original-price">$<%= minOriginalPrice %></span>
                                            <% } else { %>
                                                <span class="sale-price">$<%= minSalePrice %> - $<%= maxSalePrice %></span>
                                                <span class="original-price">$<%= minOriginalPrice %> - $<%= maxOriginalPrice %></span>
                                            <% } %>
                                        </p>
                                    <% } else { %>
                                        <% if (minSalePrice === maxSalePrice) { %>
                                            <p class="price">$<%= minSalePrice %></p>
                                        <% } else { %>
                                            <p class="price">$<%= minSalePrice %> - $<%= maxSalePrice %></p>
                                        <% } %>
                                    <% } %>
                                <% } else { %>
                                    <p class="price">Price not available</p>
                                <% } %>
                                <div class="rating">
                                    <% if (product.ratings && product.ratings.average > 0) { %>
                                        <% const rating = product.ratings.average; %>
                                        <%= '★'.repeat(Math.floor(rating)) %><%= '☆'.repeat(5 - Math.floor(rating)) %>
                                        <span>(<%= product.ratings.count || 0 %>)</span>
                                    <% } else { %>
                                        ★★★★☆ <span>(0)</span>
                                    <% } %>
                                </div>
                                <% if (product.productOffer && product.productOffer > 0) { %>
                                    <div class="offer-badge"><%= product.productOffer %>% OFF</div>
                                <% } %>
                                <% if (product.brand) { %>
                                    <p class="brand"><%= product.brand %></p>
                                <% } %>
                            </div>
                        </div>
                    <% }) %>
                <% } else { %>
                    <div style="text-align: center; grid-column: 1 / -1; padding: 40px;">
                        <h3>No products available at the moment</h3>
                        <p>Please check back later for new arrivals!</p>
                    </div>
                <% } %>
            </div>
        </div>
    </section>

    <!-- Footer -->
    <%-include("../partials/user/userfooter")%>
</body>
</html>